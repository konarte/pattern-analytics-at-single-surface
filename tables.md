# Структура данных применяемая в программе #

Все данные обрабатываемые программой расположены нескольких таблицах Ниже приведен список таблиц используемых в программе.


# Details #

Add your content here.  Format your content with:
  * Text in **bold** or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages

Каталог поверхностей , SURFACES
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_SURFACE|Первичный ключ|NUMBER(10) |M     |                |
|SURFACE\_TYPE|Форма поверхности(тело вращения плоскость), внешний ключ на таблицу SURFACE\_CLASSES|NUMBER(10) |M     |+               |
|SURFACE\_MODE|Конфигурация поверхности. Внешний ключ на таблицу SURFACES\_MODES. |NUMBER(10) |M     |+               |
|SURFACE\_MATERIAL|Материал (сталь, сиськи и т.п), внешний ключ на таблицу SURFACE\_MATERIALS|NUMBER(10) |M     |+               |
|HEIGHT  |Высота, мм|NUMBER(14,4)|      |                |
|WIDTH   |Ширина, мм|NUMBER(14,4)|      |                |
|LENGTH  |Длина, мм|NUMBER(14,4)|      |                |
|MULTI\_LAYER|Многослойный объект (например печатная плата| BOOL      |M     |                |

Каталог видов дефектов, DEFECT\_CLASSES
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_DEFECT\_CLASS|Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название вида дефекта|VARCHAR(255)|      |                |

Каталог типов дефектов, DEFECT\_TYPES
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_DEFECT\_TYPE|Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название типа дефекта|VARCHAR(255)|      |                |
|DEFECT\_IMAGE|Изображение дефекта в виде картинки. 256x256 пикселей.|BLOB       |      |                |

Каталог дефектов, DEFECTS
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_DEFECT|Первичный ключ|NUMBER(10) |      |                |
|DEFECT\_CLASS|Вид дефекта (поверхностный, внутренний и т.п.). Внешний ключ на таблицу DEFECT\_CLASSES|NUMBER(10) |      |                |
|DEFECT\_TYPE|Тип дефекта (каверна, окалина, прижог) согласно классификации. Внешний ключ на таблицу DEFECT\_TYPE|NUMBER(10) |      |                |
|BEDDING\_DEPTH|Глубина залегания, мм: от 0 до 10 мм для вихретоков (включая дробные части). Глубина залегания задается для всех дефектов.|NUMBER     |      |                |
|DEPTH   |Глубина, мм (включая дробные части)|NUMBER     |      |                |
|WIDTH   |Ширина (радиус), мм (включая дробные части)|NUMBER     |      |                |
|LENGTH  |Длина, мм (включая дробные части)|NUMBER     |      |                |

Каталог поддерживаемых ОС, L\_SUPPORTED\_OS
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_OS  |Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название ОС (Windows-86, Windows-86-64, Windows-IA64, Linux-86, Linux-86-64)|VARCHAR(255)|      |                |

Каталог модулей анализа, L\_MODULES
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_MODULE|Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название модуля	|VARCHAR(255)|      |                |
|JAVA\_CODE|Собственно, сам JAVA-код-будет подгружен при запуске программы.|BLOB       |      |                |

Каталог фильтров изображений, L\_FILTERS
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_FILTER|Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название фильтра|VARCHAR(255)|      |                |
|JAVA\_CODE|Собственно, сам JAVA-код.|BLOB       |      |                |


Каталог нативных модулей, L_NATIVE_|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_NATIVE|Первичный ключ|NUMBER(10) |      |                |
|MODULE  |Внешний ключ на таблицу L\_MODULES|NUMBER(10) |      |                |
|FILTER  |Внешний ключ на таблицу L\_FILTERS. Одна библиотека может содержать поддержку как набора фильтров, так и модулей|NUMBER(10) |      |                |
|OS      |Внешний ключ на таблицу L\_SUPPORTED\_OS|NUMBER(10) |      |                |
|COMPILED\_CODE|Скомпилированная библиотека для текущей ОС|BLOB       |      |                |

Основная идея нативных фильтров заключается в возможности поддержки программ, скомпилированных для разных ОС, а наша программа может запускаться в куче ОС. Во время запуска мы определим, под какой ОС работаем и загрузим соответствующий нативный код (или скажем, что такого у нас нет) – данный нативный код будет сохранен в виде файла на диске.

Поскольку для каждого нативного фильтра требуется специальная отдельная библиотека поддержки от Java, то нативный модуль не сможет существовать без базового.

Загрузка в систему модулей и фильтров – задача администраторов системы

Каталог годографов, LOCUSES
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_LOCUS|Первичный ключ|NUMBER(10) |      |                |
|NAME    |Название годографа (задается пользователем). По-умолчанию выбирается из названия файла|VARCHAR(255)|      |                |
|THUMB\_IMAGE|Изображение предпросмотра, который был отмасштабирован до необходимого размера, к нему были применены все выбранные фильтры, после чего он сжат до более мелкого размера (для отображения в интерфейсе) и представлен в виде изображения. Размер изображения должен составлять 256x256 пикселей и храниться в формате, удобном для загрузки в приложение.|BLOB       |      |                |
|HISTOGRAM|Гистограмма изображения с примененными фильтрами. Если мы будем просто изображать гистограмму – предлагается хранить её в виде обычного изображения. Если мы будем её анализировать – необходимо сохранять в формате аналогичном матрице.|BLOB       |      |                |
|FILTERED\_IMAGE|Базовое изображение – уже отмасштабированное и с примененными фильтрами. Это основа для кросс-модульных сравнений (поскольку каждый модуль будет хранить свои собственные данные в таблице LOCUS\_MODULE\_PARAMS).|BLOB       |      |                |
|MODULE  |Модуль анализа, внешний ключ на таблицу L\_MODULES|NUMBER(10) |      |                |
|ID\_SENSOR|Внешний ключ на таблицу датчиков|NUMBER(10) |      |                |
|ID\_SURFACE|Внешний ключ на таблицу поверхностей|NUMBER(10) |      |                |
|ID\_DEFECT|Внешний ключ на таблицу дефектов|NUMBER(10) |      |                |

Помните, что поверхность может быть бездефектной!


Каталог оригинальных годографов, LOCUS\_SOURCE
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_LOCUS\_SOURCE|Первичный ключ|NUMBER(10) |      |                |
|LOCUS   |Ссылка на годограф, внешний ключ на таблицу LOCUSES|NUMBER(10) |      |                |
|FILENAME|Название оригинального файла. Просто имя, без пути.|VARCHAR(255)|      |                |
|SOURCE\_IMAGE|Оригинальный файл, двоичные данные. Немасштабированный, без применения фильтров. Это именно сам файл. На размер нам плевать – он будет храниться не хуже чем в виде обычной ссылки на файл. Т.е. в каком формате был оригинальный файл, так он здесь и будет целиком помещаться.|BLOB       |      |                |

Каталог примененных фильтров к годографу, LOCUS\_FILTERS
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_LOCUS\_FILTER|Первичный ключ|NUMBER(10) |      |                |
|LOCUS   |Ссылка на годограф, внешний ключ на таблицу LOCUSES|NUMBER(10) |      |                |
|FILTER  |Фильтр, внешний ключ на таблицу L\_FILTERS|NUMBER(10) |      |                |
|OPTIONS |Параметры фильтра|VARCHAR(4096)|      |                |
|ORDER   |Порядковый номер примененного фильтра|NUMBER(6)  |      |                |

Каталог параметров примененного модуля к годографу, LOCUS\_MODULE\_PARAMS
|Название|	Описание|	Тип данных|	Обяз.|Известно заранее|
|:-------|:--------|:----------|:-----|:---------------|
|ID\_MODULE\_PARAM|Первичный ключ|NUMBER(10) |      |                |
|LOCUS   |Ссылка на годограф, внешний ключ на таблицу LOCUSES|NUMBER(10) |      |                |
|PARAM\_NAME|Название параметра|VARCHAR(255)|      |                |
|PARAM\_DATA|Значение параметра|BLOB       |      |                |